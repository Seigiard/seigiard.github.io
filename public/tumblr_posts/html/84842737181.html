<!DOCTYPE html>
<html>
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <link rel="stylesheet" type="text/css" href="../style.css" />
  </head>
  <body>
    <h1>Фоторама и количество изображений</h1>
    <p>
      Захотелось в дополнение к превьюшкам еще отображать информер вида «5/23»,
      показывающий, какую фотографию мы смотрим и сколько их всего.
    </p>
    <p>
      Сначала было написано решение, добавляющее дополнительный слой, в который
      выводили информацию, а через колбек этот слой мы обновляли. Относительно
      простое решение.
    </p>
    <p>
      Однако, написав его и посмотрев на код, я понял, что можно сделать проще.
    </p>
    <p><strong>В фотораме есть подписи к фотографиям.</strong></p>
    <p>
      Итак, перед инициализацией фоторамы мы проходим все изображения в слайдере
      и навешиваем на них дополнительную информацию, какая картинка и сколько
      всего.
    </p>
    <pre><code>$(function() {
    $('.imageslider').each(function(i,el){
        var el = $(el);
        var count = $("img",el).length;
        $("img",el).each(function(i,img){
            var img = $(img);
            img.attr("alt", img.attr("alt") 
                ? (i+1)+'/'+count+' '+img.attr("alt")
                : img.attr("alt", '(i+1)+'/'+count
            );
        });
    });
    $('.imageslider').fotorama();
});
</code></pre>
    <p>Немного магии и получаем желаемый результат.</p>
    <p>
      <figure
        data-orig-height="204"
        data-orig-width="248"
        data-orig-src="./_resources/84842737181_0.png"
      >
        <img
          src="./_resources/84842737181_0.png"
          data-orig-height="204"
          data-orig-width="248"
          data-orig-src="./_resources/84842737181_0.png"
        />
      </figure>
    </p>

    <div id="footer">
      <span id="timestamp"> January 19th, 2013 10:27pm </span>
      <span class="tag">Blog</span>
    </div>
  </body>
</html>
