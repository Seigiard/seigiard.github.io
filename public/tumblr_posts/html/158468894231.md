# Как добавить ssh-key навсегда

На новом маке столкнулся с проблемой: система после перезагрузки теряла
ssh-ключи от репозиториев и приходилось добавлять их вручную с помощью
`ssh-add`. На прежнем маке и на ubuntu имел такую же проблему.

## Вариант 1

Можно руками прописать в `˜/.profile` или `˜/.zshrc` (если у вас стоит
zsh) волшебную строку, добавляющую ключ при запуске системы:

    ssh-add ~/.ssh/id_rsa &>/dev/null

Но это редкостное извращение, как мне кажется.

## Вариант 2

Решение оказалось невероятно простое: в файле `~/.ssh/config` надо
прописать все необходимые ключи в следующем формате:

    Host github.com
      HostName github.com
      User YOUR_GITHUB_USERNAME
      IdentityFile ~/.ssh/githubKey

Эта запись указывает, что для всех репозиториев с хоста github.com надо
использовать именно этот ssh-ключ.

Если вы укажете `Host github`, то вам надо будет клонировать репозитории
с `@github`, а не `@github.com`. Поэтому не делайте так.

И не забудьте добавить этот ключ в настройках репозитория.

Кстати, ФТП-клиент SourceTree автоматически добавляет данные записи при
привязке аккаунтов. Но он в Host пишет не домены, поэтому надо зайти и
руками поменять.

<span id="timestamp"> March 16th, 2017 5:04am </span>
