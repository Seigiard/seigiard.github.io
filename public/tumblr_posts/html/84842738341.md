# Beautypo 0.0.2

Намедни возникла проблема: на определенном, весьма маленьком тексте,
форматтер в «Beautypo» не срабатывал и возвращал битый текст, который
Jevix потом превращал в пустую строку.

Пришлось вооружиться лупой и посмотреть, в чем беда. Оказалось, что в
типографе тэги шифруются и расшифровываются через
base64*decode/base64*encode, а //у меня// эти функции плохо работали с
подчеркиваниями строк, слешами и другими спецсимволами.

Обернув обрабатываемые строки дополнительно в
htmlentities/html*entity*decode, я исправил проблему.

#### Однако остановиться уже было нельзя.

Решив довести до ума вставку одиночных изображений и паков картинок для
слайдеров, я столкнулся с двумя неприятными моментами.

Во-первых, при вставке изображений, они должны отбиваться пустыми
строками. Но где стоит курсор — неизвестно, и как встанут новые строки —
предсказать затруднительно.

Во-вторых, периодически при вставках терялся фокус в текстовом поле, и
каретка устанавливалась в конец текста, что раздражало. Я же могу
работать и в самом начале текста, блин.

Пришлось потратить немного времени и написать набор правил, который
форматирует текст в текстовом поле. А также пришлось поломать голову, и
написать функционал установки фокуса строго туда, куда надо.

В итоге получилось около 10 строчек доделки, но убито было около часов
пяти на изучение вопроса, переписывания и улучшения. Их вряд ли кто
заметит, но работать с сайтом, хочется надеяться, будет приятно.

<span id="timestamp"> January 21st, 2013 12:05am </span> <span
class="tag">Blog</span>
